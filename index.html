<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Business Manager | TOPLINK SOLUTIONS, BENICK ACCESSORIES, KIM MELONS</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <style>
        .sidebar-link.active {
            background-color: #3b82f6;
            color: white;
        }
        .sidebar-link:hover:not(.active) {
            background-color: #f3f4f6;
        }
        .fade-in {
            animation: fadeIn 0.5s;
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        .card-hover {
            transition: transform 0.3s, box-shadow 0.3s;
        }
        .card-hover:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }
        .auth-form {
            transition: all 0.3s ease-in-out;
        }
        .hidden-form {
            display: none;
            opacity: 0;
            transform: translateX(20px);
        }
        .active-form {
            display: block;
            opacity: 1;
            transform: translateX(0);
        }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Login Screen -->
    <div id="login-screen" class="min-h-screen flex items-center justify-center bg-gradient-to-r from-blue-500 to-purple-600 p-4">
        <div class="bg-white p-8 rounded-2xl shadow-2xl w-full max-w-md relative overflow-hidden">
            <!-- Loading Spinner -->
            <div id="loading-spinner" class="hidden absolute inset-0 bg-white bg-opacity-90 flex items-center justify-center z-10">
                <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"></div>
            </div>

            <div class="text-center mb-8">
                <h1 class="text-3xl font-bold text-gray-800">Business Manager</h1>
                <p class="text-gray-600 mt-2">Manage TOPLINK, BENICK & KIM MELONS</p>
            </div>

            <!-- Toggle Buttons -->
            <div class="flex mb-6 bg-gray-100 rounded-lg p-1">
                <button id="login-tab" class="flex-1 py-2 px-4 rounded-md font-medium transition-colors bg-blue-500 text-white">
                    Login
                </button>
                <button id="signup-tab" class="flex-1 py-2 px-4 rounded-md font-medium transition-colors text-gray-600 hover:text-gray-800">
                    Sign Up
                </button>
            </div>

            <!-- Login Form -->
            <form id="login-form" class="auth-form active-form">
                <div class="mb-4">
                    <label class="block text-gray-700 text-sm font-bold mb-2" for="login-email">
                        Email
                    </label>
                    <input class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" 
                           id="login-email" type="email" placeholder="your@email.com" required>
                </div>
                <div class="mb-6">
                    <label class="block text-gray-700 text-sm font-bold mb-2" for="login-password">
                        Password
                    </label>
                    <input class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 mb-3 leading-tight focus:outline-none focus:shadow-outline" 
                           id="login-password" type="password" placeholder="Password" required>
                </div>
                <div class="flex items-center justify-between mb-4">
                    <a href="#" id="forgot-password-link" class="text-sm text-blue-500 hover:text-blue-700">
                        Forgot Password?
                    </a>
                </div>
                <div class="flex items-center justify-between">
                    <button class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline w-full" type="submit">
                        Sign In
                    </button>
                </div>
            </form>

            <!-- Sign Up Form -->
            <form id="signup-form" class="auth-form hidden-form">
                <div class="mb-4">
                    <label class="block text-gray-700 text-sm font-bold mb-2" for="signup-name">
                        Full Name
                    </label>
                    <input class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" 
                           id="signup-name" type="text" placeholder="Your Name" required>
                </div>
                <div class="mb-4">
                    <label class="block text-gray-700 text-sm font-bold mb-2" for="signup-email">
                        Email
                    </label>
                    <input class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" 
                           id="signup-email" type="email" placeholder="your@email.com" required>
                </div>
                <div class="mb-6">
                    <label class="block text-gray-700 text-sm font-bold mb-2" for="signup-password">
                        Password
                    </label>
                    <input class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 mb-3 leading-tight focus:outline-none focus:shadow-outline" 
                           id="signup-password" type="password" placeholder="Create a password" minlength="6" required>
                </div>
                <div class="flex items-center justify-between">
                    <button class="bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline w-full" type="submit">
                        Create Account
                    </button>
                </div>
            </form>

            <!-- Forgot Password Form -->
            <form id="forgot-password-form" class="auth-form hidden-form">
                <div class="mb-6">
                    <label class="block text-gray-700 text-sm font-bold mb-2" for="reset-email">
                        Email Address
                    </label>
                    <input class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" 
                           id="reset-email" type="email" placeholder="your@email.com" required>
                    <p class="text-sm text-gray-600 mt-2">We'll send you a password reset link</p>
                </div>
                <div class="flex items-center justify-between space-x-4">
                    <button type="button" id="back-to-login" class="bg-gray-500 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline flex-1">
                        Back
                    </button>
                    <button class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline flex-1" type="submit">
                        Send Reset Link
                    </button>
                </div>
            </form>

            <!-- Messages -->
            <div id="auth-message" class="mt-4 p-3 rounded hidden"></div>

            <div class="mt-6 text-center text-sm text-gray-600">
                <p>Demo: Use any valid email and password to sign up</p>
            </div>
        </div>
    </div>

    <!-- Main App (initially hidden) -->
    <div id="app" class="hidden">
        <!-- Sidebar -->
        <div class="fixed top-0 left-0 h-full w-64 bg-white shadow-lg z-10">
            <div class="p-4 border-b">
                <h1 class="text-xl font-bold text-gray-800">Business Manager</h1>
                <p class="text-sm text-gray-600" id="user-welcome">Welcome back!</p>
            </div>
            <div class="p-4">
                <h2 class="text-sm font-semibold text-gray-500 uppercase tracking-wider mb-2">Dashboard</h2>
                <ul>
                    <li>
                        <a href="#" class="sidebar-link active block py-2 px-4 rounded mb-1 text-gray-700" data-page="main-dashboard">
                            <i class="fas fa-tachometer-alt mr-2"></i>Overall Dashboard
                        </a>
                    </li>
                </ul>
                
                <h2 class="text-sm font-semibold text-gray-500 uppercase tracking-wider mt-6 mb-2">Businesses</h2>
                <ul>
                    <li>
                        <a href="#" class="sidebar-link block py-2 px-4 rounded mb-1 text-gray-700" data-page="toplink-dashboard">
                            <i class="fas fa-building mr-2"></i>TOPLINK SOLUTIONS
                        </a>
                    </li>
                    <li>
                        <a href="#" class="sidebar-link block py-2 px-4 rounded mb-1 text-gray-700" data-page="benick-dashboard">
                            <i class="fas fa-store mr-2"></i>BENICK ACCESSORIES
                        </a>
                    </li>
                    <li>
                        <a href="#" class="sidebar-link block py-2 px-4 rounded mb-1 text-gray-700" data-page="kim-dashboard">
                            <i class="fas fa-seedling mr-2"></i>KIM MELONS
                        </a>
                    </li>
                </ul>
                
                <h2 class="text-sm font-semibold text-gray-500 uppercase tracking-wider mt-6 mb-2">Tools</h2>
                <ul>
                    <li>
                        <a href="#" class="sidebar-link block py-2 px-4 rounded mb-1 text-gray-700" data-page="suppliers">
                            <i class="fas fa-truck mr-2"></i>All Suppliers
                        </a>
                    </li>
                    <li>
                        <a href="#" class="sidebar-link block py-2 px-4 rounded mb-1 text-gray-700" data-page="reports">
                            <i class="fas fa-chart-bar mr-2"></i>Reports
                        </a>
                    </li>
                </ul>
                
                <h2 class="text-sm font-semibold text-gray-500 uppercase tracking-wider mt-6 mb-2">Account</h2>
                <ul>
                    <li>
                        <a href="#" class="sidebar-link block py-2 px-4 rounded mb-1 text-gray-700" data-page="profile">
                            <i class="fas fa-user mr-2"></i>Profile
                        </a>
                    </li>
                    <li>
                        <a href="#" id="logout-btn" class="block py-2 px-4 rounded mb-1 text-gray-700 hover:bg-red-50 hover:text-red-600">
                            <i class="fas fa-sign-out-alt mr-2"></i>Logout
                        </a>
                    </li>
                </ul>
            </div>
        </div>

        <!-- Main Content -->
        <div class="ml-64 p-6">
            <div id="page-content" class="fade-in">
                <!-- Main Dashboard will be loaded here by default -->
            </div>
        </div>
    </div>

    <script>
        // Initialize Supabase - REPLACE WITH YOUR ACTUAL SUPABASE CREDENTIALS
        const supabaseUrl = 'https://your-project.supabase.co';
        const supabaseAnonKey = 'your-anon-key';
        
        const supabase = window.supabase.createClient(supabaseUrl, supabaseAnonKey);

        // Sample data for demonstration
        const businessData = {
            'toplink': {
                name: 'TOPLINK SOLUTIONS',
                color: 'blue',
                income: 125430,
                profit: 45200,
                losses: 8200,
                dailyComparison: '+5.2%',
                weeklyComparison: '+12.7%',
                monthlyComparison: '+18.3%',
                suppliers: [
                    { id: 1, name: 'Global Tech Inc', contact: 'john@globaltech.com', rating: 4.5, phone: '+1-555-0101' },
                    { id: 2, name: 'Component World', contact: 'sarah@compworld.com', rating: 4.2, phone: '+1-555-0102' },
                    { id: 3, name: 'Digital Solutions', contact: 'mike@digisolutions.com', rating: 4.7, phone: '+1-555-0103' },
                    { id: 4, name: 'Tech Partners LLC', contact: 'anna@techpartners.com', rating: 4.4, phone: '+1-555-0104' }
                ],
                monthlyData: [12000, 19000, 15000, 25000, 22000, 30000, 28000, 32000, 29000, 35000, 33000, 38000],
                previousYearData: [10000, 15000, 13000, 20000, 18000, 25000, 23000, 27000, 25000, 30000, 28000, 32000]
            },
            'benick': {
                name: 'BENICK ACCESSORIES',
                color: 'green',
                income: 85670,
                profit: 32150,
                losses: 5300,
                dailyComparison: '+3.8%',
                weeklyComparison: '+8.5%',
                monthlyComparison: '+14.2%',
                suppliers: [
                    { id: 1, name: 'Fashion Trends Ltd', contact: 'lisa@fashiontrends.com', rating: 4.3, phone: '+1-555-0201' },
                    { id: 2, name: 'Style Makers', contact: 'david@stylemakers.com', rating: 4.0, phone: '+1-555-0202' },
                    { id: 3, name: 'Accessory World', contact: 'emma@accessoryworld.com', rating: 4.6, phone: '+1-555-0203' },
                    { id: 4, name: 'Trendsetters Inc', contact: 'james@trendsetters.com', rating: 4.1, phone: '+1-555-0204' }
                ],
                monthlyData: [8000, 12000, 10000, 15000, 18000, 20000, 19000, 22000, 21000, 24000, 23000, 25000],
                previousYearData: [7000, 10000, 9000, 13000, 15000, 18000, 17000, 19000, 18000, 21000, 20000, 22000]
            },
            'kim': {
                name: 'KIM MELONS',
                color: 'purple',
                income: 65240,
                profit: 28450,
                losses: 4200,
                dailyComparison: '+7.1%',
                weeklyComparison: '+15.3%',
                monthlyComparison: '+22.6%',
                suppliers: [
                    { id: 1, name: 'Fresh Farms Co', contact: 'tom@freshfarms.com', rating: 4.8, phone: '+1-555-0301' },
                    { id: 2, name: 'Organic Harvest', contact: 'susan@organicharvest.com', rating: 4.4, phone: '+1-555-0302' },
                    { id: 3, name: 'Local Growers', contact: 'robert@localgrowers.com', rating: 4.1, phone: '+1-555-0303' },
                    { id: 4, name: 'Farm Fresh Ltd', contact: 'maria@farmfresh.com', rating: 4.5, phone: '+1-555-0304' }
                ],
                monthlyData: [6000, 9000, 11000, 13000, 15000, 18000, 17000, 19000, 20000, 22000, 21000, 23000],
                previousYearData: [5000, 7000, 9000, 11000, 13000, 15000, 14000, 16000, 17000, 19000, 18000, 20000]
            }
        };

        // DOM Elements
        const loginScreen = document.getElementById('login-screen');
        const app = document.getElementById('app');
        const loadingSpinner = document.getElementById('loading-spinner');
        const authMessage = document.getElementById('auth-message');
        const userWelcome = document.getElementById('user-welcome');
        
        // Auth elements
        const loginTab = document.getElementById('login-tab');
        const signupTab = document.getElementById('signup-tab');
        const loginForm = document.getElementById('login-form');
        const signupForm = document.getElementById('signup-form');
        const forgotPasswordForm = document.getElementById('forgot-password-form');
        const forgotPasswordLink = document.getElementById('forgot-password-link');
        const backToLogin = document.getElementById('back-to-login');
        
        const logoutBtn = document.getElementById('logout-btn');
        const pageContent = document.getElementById('page-content');
        const sidebarLinks = document.querySelectorAll('.sidebar-link');

        // Auth state management
        let currentUser = null;

        // Show/hide forms
        function showForm(formToShow) {
            // Hide all forms
            document.querySelectorAll('.auth-form').forEach(form => {
                form.classList.remove('active-form');
                form.classList.add('hidden-form');
            });
            
            // Show target form
            formToShow.classList.remove('hidden-form');
            formToShow.classList.add('active-form');
            
            // Update tab styles
            loginTab.classList.remove('bg-blue-500', 'text-white');
            signupTab.classList.remove('bg-blue-500', 'text-white');
            
            if (formToShow === loginForm || formToShow === forgotPasswordForm) {
                loginTab.classList.add('bg-blue-500', 'text-white');
                signupTab.classList.add('text-gray-600', 'hover:text-gray-800');
            } else {
                signupTab.classList.add('bg-blue-500', 'text-white');
                loginTab.classList.add('text-gray-600', 'hover:text-gray-800');
            }
            
            // Clear messages
            hideMessage();
        }

        // Show message
        function showMessage(message, type = 'error') {
            authMessage.textContent = message;
            authMessage.className = `mt-4 p-3 rounded ${type === 'error' ? 'bg-red-100 text-red-700' : 'bg-green-100 text-green-700'}`;
            authMessage.classList.remove('hidden');
        }

        // Hide message
        function hideMessage() {
            authMessage.classList.add('hidden');
        }

        // Show loading
        function showLoading() {
            loadingSpinner.classList.remove('hidden');
        }

        // Hide loading
        function hideLoading() {
            loadingSpinner.classList.add('hidden');
        }

        // Auth event listeners
        loginTab.addEventListener('click', () => showForm(loginForm));
        signupTab.addEventListener('click', () => showForm(signupForm));
        forgotPasswordLink.addEventListener('click', (e) => {
            e.preventDefault();
            showForm(forgotPasswordForm);
        });
        backToLogin.addEventListener('click', () => showForm(loginForm));

        // Login handler
        loginForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            const email = document.getElementById('login-email').value;
            const password = document.getElementById('login-password').value;
            
            showLoading();
            hideMessage();
            
            try {
                const { data, error } = await supabase.auth.signInWithPassword({
                    email,
                    password
                });
                
                if (error) throw error;
                
                currentUser = data.user;
                showMessage('Login successful!', 'success');
                setTimeout(() => {
                    loginScreen.classList.add('hidden');
                    app.classList.remove('hidden');
                    userWelcome.textContent = `Welcome back, ${currentUser.email}!`;
                    loadPage('main-dashboard');
                }, 1000);
                
            } catch (error) {
                showMessage(error.message);
            } finally {
                hideLoading();
            }
        });

        // Sign up handler
        signupForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            const name = document.getElementById('signup-name').value;
            const email = document.getElementById('signup-email').value;
            const password = document.getElementById('signup-password').value;
            
            showLoading();
            hideMessage();
            
            try {
                const { data, error } = await supabase.auth.signUp({
                    email,
                    password,
                    options: {
                        data: {
                            full_name: name
                        }
                    }
                });
                
                if (error) throw error;
                
                showMessage('Account created successfully! Please check your email for verification.', 'success');
                setTimeout(() => showForm(loginForm), 3000);
                
            } catch (error) {
                showMessage(error.message);
            } finally {
                hideLoading();
            }
        });

        // Forgot password handler
        forgotPasswordForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            const email = document.getElementById('reset-email').value;
            
            showLoading();
            hideMessage();
            
            try {
                const { error } = await supabase.auth.resetPasswordForEmail(email, {
                    redirectTo: `${window.location.origin}/reset-password.html`,
                });
                
                if (error) throw error;
                
                showMessage('Password reset link sent to your email!', 'success');
                
            } catch (error) {
                showMessage(error.message);
            } finally {
                hideLoading();
            }
        });

        // Logout handler
        logoutBtn.addEventListener('click', async () => {
            try {
                const { error } = await supabase.auth.signOut();
                if (error) throw error;
                
                app.classList.add('hidden');
                loginScreen.classList.remove('hidden');
                currentUser = null;
                
                // Reset forms
                showForm(loginForm);
                document.getElementById('login-email').value = '';
                document.getElementById('login-password').value = '';
                hideMessage();
                
            } catch (error) {
                console.error('Logout error:', error);
            }
        });

        // Check for existing session on page load
        async function checkAuth() {
            const { data } = await supabase.auth.getSession();
            if (data.session) {
                currentUser = data.session.user;
                loginScreen.classList.add('hidden');
                app.classList.remove('hidden');
                userWelcome.textContent = `Welcome back, ${currentUser.email}!`;
                loadPage('main-dashboard');
            }
        }

        // Initialize auth check
        checkAuth();

        // Sidebar navigation
        sidebarLinks.forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                const page = link.getAttribute('data-page');
                
                // Update active state
                sidebarLinks.forEach(l => l.classList.remove('active'));
                link.classList.add('active');
                
                loadPage(page);
            });
        });

        // Page loading function
        function loadPage(page) {
            pageContent.innerHTML = '';
            pageContent.classList.remove('fade-in');
            
            setTimeout(() => {
                pageContent.classList.add('fade-in');
                
                switch(page) {
                    case 'main-dashboard':
                        loadMainDashboard();
                        break;
                    case 'toplink-dashboard':
                        loadBusinessDashboard('toplink');
                        break;
                    case 'benick-dashboard':
                        loadBusinessDashboard('benick');
                        break;
                    case 'kim-dashboard':
                        loadBusinessDashboard('kim');
                        break;
                    case 'suppliers':
                        loadAllSuppliers();
                        break;
                    case 'reports':
                        loadReportsPage();
                        break;
                    case 'profile':
                        loadProfilePage();
                        break;
                    default:
                        loadMainDashboard();
                }
            }, 10);
        }
        // Load main dashboard
        function loadMainDashboard() {
            pageContent.innerHTML = `
                <div class="mb-8">
                    <h1 class="text-3xl font-bold text-gray-800">Overall Business Dashboard</h1>
                    <p class="text-gray-600">Summary of all your businesses</p>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                    <div class="bg-white rounded-xl shadow-md p-6 card-hover">
                        <div class="flex justify-between items-start">
                            <div>
                                <h3 class="text-lg font-semibold text-gray-700">TOPLINK SOLUTIONS</h3>
                                <p class="text-2xl font-bold text-blue-600 mt-2">$${businessData.toplink.income.toLocaleString()}</p>
                                <p class="text-green-500 mt-1">Profit: $${businessData.toplink.profit.toLocaleString()}</p>
                                <p class="text-red-500 mt-1">Losses: $${businessData.toplink.losses.toLocaleString()}</p>
                            </div>
                            <div class="bg-blue-100 p-3 rounded-full">
                                <i class="fas fa-building text-blue-500 text-xl"></i>
                            </div>
                        </div>
                        <button class="mt-4 w-full bg-blue-500 hover:bg-blue-600 text-white py-2 rounded-lg transition duration-200 view-business-btn" data-business="toplink">
                            View Details
                        </button>
                    </div>
                    
                    <div class="bg-white rounded-xl shadow-md p-6 card-hover">
                        <div class="flex justify-between items-start">
                            <div>
                                <h3 class="text-lg font-semibold text-gray-700">BENICK ACCESSORIES</h3>
                                <p class="text-2xl font-bold text-green-600 mt-2">$${businessData.benick.income.toLocaleString()}</p>
                                <p class="text-green-500 mt-1">Profit: $${businessData.benick.profit.toLocaleString()}</p>
                                <p class="text-red-500 mt-1">Losses: $${businessData.benick.losses.toLocaleString()}</p>
                            </div>
                            <div class="bg-green-100 p-3 rounded-full">
                                <i class="fas fa-store text-green-500 text-xl"></i>
                            </div>
                        </div>
                        <button class="mt-4 w-full bg-green-500 hover:bg-green-600 text-white py-2 rounded-lg transition duration-200 view-business-btn" data-business="benick">
                            View Details
                        </button>
                    </div>
                    
                    <div class="bg-white rounded-xl shadow-md p-6 card-hover">
                        <div class="flex justify-between items-start">
                            <div>
                                <h3 class="text-lg font-semibold text-gray-700">KIM MELONS</h3>
                                <p class="text-2xl font-bold text-purple-600 mt-2">$${businessData.kim.income.toLocaleString()}</p>
                                <p class="text-green-500 mt-1">Profit: $${businessData.kim.profit.toLocaleString()}</p>
                                <p class="text-red-500 mt-1">Losses: $${businessData.kim.losses.toLocaleString()}</p>
                            </div>
                            <div class="bg-purple-100 p-3 rounded-full">
                                <i class="fas fa-seedling text-purple-500 text-xl"></i>
                            </div>
                        </div>
                        <button class="mt-4 w-full bg-purple-500 hover:bg-purple-600 text-white py-2 rounded-lg transition duration-200 view-business-btn" data-business="kim">
                            View Details
                        </button>
                    </div>
                </div>
                
                <div class="bg-white rounded-xl shadow-md p-6 mb-8">
                    <h2 class="text-xl font-bold text-gray-800 mb-4">Financial Overview</h2>
                    <div class="h-80">
                        <canvas id="overviewChart"></canvas>
                    </div>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="bg-white rounded-xl shadow-md p-6">
                        <h2 class="text-xl font-bold text-gray-800 mb-4">Recent Activity</h2>
                        <ul class="space-y-4">
                            <li class="flex items-center">
                                <div class="bg-blue-100 p-2 rounded-full mr-3">
                                    <i class="fas fa-money-bill-wave text-blue-500"></i>
                                </div>
                                <div>
                                    <p class="font-medium">Payment received from Client A</p>
                                    <p class="text-sm text-gray-500">2 hours ago • TOPLINK SOLUTIONS</p>
                                </div>
                            </li>
                            <li class="flex items-center">
                                <div class="bg-green-100 p-2 rounded-full mr-3">
                                    <i class="fas fa-shipping-fast text-green-500"></i>
                                </div>
                                <div>
                                    <p class="font-medium">New inventory arrived</p>
                                    <p class="text-sm text-gray-500">5 hours ago • BENICK ACCESSORIES</p>
                                </div>
                            </li>
                            <li class="flex items-center">
                                <div class="bg-purple-100 p-2 rounded-full mr-3">
                                    <i class="fas fa-seedling text-purple-500"></i>
                                </div>
                                <div>
                                    <p class="font-medium">Harvest completed for season</p>
                                    <p class="text-sm text-gray-500">1 day ago • KIM MELONS</p>
                                </div>
                            </li>
                        </ul>
                    </div>
                    
                    <div class="bg-white rounded-xl shadow-md p-6">
                        <h2 class="text-xl font-bold text-gray-800 mb-4">Quick Actions</h2>
                        <div class="grid grid-cols-2 gap-4">
                            <button class="bg-blue-500 hover:bg-blue-600 text-white py-3 rounded-lg transition duration-200 flex flex-col items-center justify-center">
                                <i class="fas fa-plus text-xl mb-2"></i>
                                <span>Add Record</span>
                            </button>
                            <button class="bg-green-500 hover:bg-green-600 text-white py-3 rounded-lg transition duration-200 flex flex-col items-center justify-center">
                                <i class="fas fa-chart-bar text-xl mb-2"></i>
                                <span>Generate Report</span>
                            </button>
                            <button class="bg-purple-500 hover:bg-purple-600 text-white py-3 rounded-lg transition duration-200 flex flex-col items-center justify-center">
                                <i class="fas fa-users text-xl mb-2"></i>
                                <span>Manage Suppliers</span>
                            </button>
                            <button class="bg-indigo-500 hover:bg-indigo-600 text-white py-3 rounded-lg transition duration-200 flex flex-col items-center justify-center">
                                <i class="fas fa-cog text-xl mb-2"></i>
                                <span>Settings</span>
                            </button>
                        </div>
                    </div>
                </div>
            `;
            
            // Add event listeners to business buttons
            document.querySelectorAll('.view-business-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    const business = btn.getAttribute('data-business');
                    loadBusinessDashboard(business);
                    
                    // Update sidebar active state
                    sidebarLinks.forEach(l => l.classList.remove('active'));
                    document.querySelector(`[data-page="${business}-dashboard"]`).classList.add('active');
                });
            });
            
            // Render charts
            renderOverviewChart();
        }

        // Load business dashboard
        function loadBusinessDashboard(business) {
            const biz = businessData[business];
            const colorClass = `text-${biz.color}-600`;
            const bgColorClass = `bg-${biz.color}-100`;
            const borderColorClass = `border-${biz.color}-500`;
            
            pageContent.innerHTML = `
                <div class="mb-8">
                    <div class="flex justify-between items-center">
                        <div>
                            <h1 class="text-3xl font-bold text-gray-800">${biz.name} Dashboard</h1>
                            <p class="text-gray-600">Detailed overview and management</p>
                        </div>
                        <div class="flex space-x-4">
                            <button class="bg-white border border-gray-300 hover:bg-gray-50 text-gray-700 py-2 px-4 rounded-lg transition duration-200">
                                <i class="fas fa-download mr-2"></i>Export
                            </button>
                            <button class="bg-${biz.color}-500 hover:bg-${biz.color}-600 text-white py-2 px-4 rounded-lg transition duration-200">
                                <i class="fas fa-plus mr-2"></i>Add Record
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
                    <div class="bg-white rounded-xl shadow-md p-6 card-hover">
                        <div class="flex justify-between items-center">
                            <div>
                                <p class="text-gray-500">Total Income</p>
                                <p class="text-2xl font-bold ${colorClass}">$${biz.income.toLocaleString()}</p>
                            </div>
                            <div class="${bgColorClass} p-3 rounded-full">
                                <i class="fas fa-money-bill-wave ${colorClass} text-xl"></i>
                            </div>
                        </div>
                        <p class="text-green-500 text-sm mt-2"><i class="fas fa-arrow-up mr-1"></i> 12% from last month</p>
                    </div>
                    
                    <div class="bg-white rounded-xl shadow-md p-6 card-hover">
                        <div class="flex justify-between items-center">
                            <div>
                                <p class="text-gray-500">Net Profit</p>
                                <p class="text-2xl font-bold text-green-600">$${biz.profit.toLocaleString()}</p>
                            </div>
                            <div class="bg-green-100 p-3 rounded-full">
                                <i class="fas fa-chart-line text-green-500 text-xl"></i>
                            </div>
                        </div>
                        <p class="text-green-500 text-sm mt-2"><i class="fas fa-arrow-up mr-1"></i> 8% from last month</p>
                    </div>
                    
                    <div class="bg-white rounded-xl shadow-md p-6 card-hover">
                        <div class="flex justify-between items-center">
                            <div>
                                <p class="text-gray-500">Losses</p>
                                <p class="text-2xl font-bold text-red-600">$${biz.losses.toLocaleString()}</p>
                            </div>
                            <div class="bg-red-100 p-3 rounded-full">
                                <i class="fas fa-exclamation-triangle text-red-500 text-xl"></i>
                            </div>
                        </div>
                        <p class="text-red-500 text-sm mt-2"><i class="fas fa-arrow-up mr-1"></i> 3% from last month</p>
                    </div>
                    
                    <div class="bg-white rounded-xl shadow-md p-6 card-hover">
                        <div class="flex justify-between items-center">
                            <div>
                                <p class="text-gray-500">Suppliers</p>
                                <p class="text-2xl font-bold text-indigo-600">${biz.suppliers.length}</p>
                            </div>
                            <div class="bg-indigo-100 p-3 rounded-full">
                                <i class="fas fa-truck text-indigo-500 text-xl"></i>
                            </div>
                        </div>
                        <p class="text-gray-500 text-sm mt-2">Active suppliers</p>
                    </div>
                </div>
                
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
                    <div class="bg-white rounded-xl shadow-md p-6">
                        <h2 class="text-xl font-bold text-gray-800 mb-4">Financial Performance</h2>
                        <div class="h-80">
                            <canvas id="businessChart"></canvas>
                        </div>
                    </div>
                    
                    <div class="bg-white rounded-xl shadow-md p-6">
                        <h2 class="text-xl font-bold text-gray-800 mb-4">Supplier List</h2>
                        <div class="overflow-x-auto">
                            <table class="min-w-full divide-y divide-gray-200">
                                <thead>
                                    <tr>
                                        <th class="px-4 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Supplier</th>
                                        <th class="px-4 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Contact</th>
                                        <th class="px-4 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Rating</th>
                                        <th class="px-4 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>
                                    </tr>
                                </thead>
                                <tbody class="bg-white divide-y divide-gray-200">
                                    ${biz.suppliers.map(supplier => `
                                        <tr>
                                            <td class="px-4 py-3 whitespace-nowrap">
                                                <div class="font-medium text-gray-900">${supplier.name}</div>
                                            </td>
                                            <td class="px-4 py-3 whitespace-nowrap text-gray-500">${supplier.contact}</td>
                                            <td class="px-4 py-3 whitespace-nowrap">
                                                <div class="flex items-center">
                                                    <div class="text-yellow-400 mr-1">
                                                        <i class="fas fa-star"></i>
                                                    </div>
                                                    <span>${supplier.rating}</span>
                                                </div>
                                            </td>
                                            <td class="px-4 py-3 whitespace-nowrap text-sm font-medium">
                                                <button class="text-${biz.color}-600 hover:text-${biz.color}-900 mr-3">Edit</button>
                                                <button class="text-red-600 hover:text-red-900">Delete</button>
                                            </td>
                                        </tr>
                                    `).join('')}
                                </tbody>
                            </table>
                        </div>
                        <button class="mt-4 bg-${biz.color}-500 hover:bg-${biz.color}-600 text-white py-2 px-4 rounded-lg transition duration-200">
                            <i class="fas fa-plus mr-2"></i>Add New Supplier
                        </button>
                    </div>
                </div>
                
                <div class="bg-white rounded-xl shadow-md p-6">
                    <h2 class="text-xl font-bold text-gray-800 mb-4">Comparison Reports</h2>
                    <div class="flex space-x-4 mb-6">
                        <button class="bg-${biz.color}-500 text-white py-2 px-4 rounded-lg">Daily</button>
                        <button class="bg-white border border-gray-300 hover:bg-gray-50 text-gray-700 py-2 px-4 rounded-lg">Weekly</button>
                        <button class="bg-white border border-gray-300 hover:bg-gray-50 text-gray-700 py-2 px-4 rounded-lg">Monthly</button>
                    </div>
                    <div class="h-80">
                        <canvas id="comparisonChart"></canvas>
                    </div>
                </div>
            `;
            
            // Render charts
            renderBusinessChart(business);
            renderComparisonChart(business);
        }

        // Load profile page
        function loadProfilePage() {
            pageContent.innerHTML = `
                <div class="max-w-2xl mx-auto">
                    <div class="mb-8">
                        <h1 class="text-3xl font-bold text-gray-800">Account Profile</h1>
                        <p class="text-gray-600">Manage your account settings</p>
                    </div>
                    
                    <div class="bg-white rounded-xl shadow-md p-6 mb-6">
                        <h2 class="text-xl font-bold text-gray-800 mb-4">Personal Information</h2>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-gray-700 text-sm font-bold mb-2" for="firstName">First Name</label>
                                <input class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" id="firstName" type="text" value="Stella">
                            </div>
                            <div>
                                <label class="block text-gray-700 text-sm font-bold mb-2" for="lastName">Last Name</label>
                                <input class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" id="lastName" type="text" value="Business">
                            </div>
                            <div class="md:col-span-2">
                                <label class="block text-gray-700 text-sm font-bold mb-2" for="email">Email</label>
                                <input class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" id="email" type="email" value="stella@business.com">
                            </div>
                        </div>
                        <button class="mt-6 bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline">
                            Save Changes
                        </button>
                    </div>
                    
                    <div class="bg-white rounded-xl shadow-md p-6">
                        <h2 class="text-xl font-bold text-gray-800 mb-4">Business Preferences</h2>
                        <div class="space-y-4">
                            <div class="flex items-center">
                                <input id="notifications" type="checkbox" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded" checked>
                                <label for="notifications" class="ml-2 block text-sm text-gray-700">Receive email notifications</label>
                            </div>
                            <div class="flex items-center">
                                <input id="reports" type="checkbox" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded" checked>
                                <label for="reports" class="ml-2 block text-sm text-gray-700">Weekly performance reports</label>
                            </div>
                            <div class="flex items-center">
                                <input id="updates" type="checkbox" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded">
                                <label for="updates" class="ml-2 block text-sm text-gray-700">Product updates and news</label>
                            </div>
                        </div>
                        <button class="mt-6 bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline">
                            Save Preferences
                        </button>
                    </div>
                </div>
            `;
        }

        // Chart rendering functions
        function renderOverviewChart() {
            const ctx = document.getElementById('overviewChart').getContext('2d');
            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
                    datasets: [
                        {
                            label: 'TOPLINK SOLUTIONS',
                            data: [12000, 19000, 15000, 25000, 22000, 30000],
                            backgroundColor: 'rgba(59, 130, 246, 0.7)',
                        },
                        {
                            label: 'BENICK ACCESSORIES',
                            data: [8000, 12000, 10000, 15000, 18000, 20000],
                            backgroundColor: 'rgba(16, 185, 129, 0.7)',
                        },
                        {
                            label: 'KIM MELONS',
                            data: [6000, 9000, 11000, 13000, 15000, 18000],
                            backgroundColor: 'rgba(139, 92, 246, 0.7)',
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                callback: function(value) {
                                    return '$' + value.toLocaleString();
                                }
                            }
                        }
                    }
                }
            });
        }

        function renderBusinessChart(business) {
            const ctx = document.getElementById('businessChart').getContext('2d');
            const colors = {
                toplink: 'rgba(59, 130, 246, 0.7)',
                benick: 'rgba(16, 185, 129, 0.7)',
                kim: 'rgba(139, 92, 246, 0.7)'
            };
            
            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
                    datasets: [
                        {
                            label: 'Income',
                            data: business === 'toplink' ? [12000, 19000, 15000, 25000, 22000, 30000] :
                                  business === 'benick' ? [8000, 12000, 10000, 15000, 18000, 20000] :
                                  [6000, 9000, 11000, 13000, 15000, 18000],
                            borderColor: colors[business],
                            backgroundColor: colors[business].replace('0.7', '0.1'),
                            fill: true,
                            tension: 0.4
                        },
                        {
                            label: 'Profit',
                            data: business === 'toplink' ? [8000, 12000, 10000, 15000, 13000, 18000] :
                                  business === 'benick' ? [5000, 8000, 7000, 10000, 12000, 14000] :
                                  [4000, 6000, 7000, 9000, 10000, 12000],
                            borderColor: 'rgba(16, 185, 129, 0.7)',
                            backgroundColor: 'rgba(16, 185, 129, 0.1)',
                            fill: true,
                            tension: 0.4
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                callback: function(value) {
                                    return '$' + value.toLocaleString();
                                }
                            }
                        }
                    }
                }
            });
        }

        function renderComparisonChart(business) {
            const ctx = document.getElementById('comparisonChart').getContext('2d');
            const colors = {
                toplink: 'rgba(59, 130, 246, 0.7)',
                benick: 'rgba(16, 185, 129, 0.7)',
                kim: 'rgba(139, 92, 246, 0.7)'
            };
            
            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['Week 1', 'Week 2', 'Week 3', 'Week 4'],
                    datasets: [
                        {
                            label: 'Current Month',
                            data: [12000, 19000, 15000, 25000],
                            backgroundColor: colors[business],
                        },
                        {
                            label: 'Previous Month',
                            data: [10000, 17000, 13000, 22000],
                            backgroundColor: 'rgba(156, 163, 175, 0.7)',
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                callback: function(value) {
                                    return '$' + value.toLocaleString();
                                }
                            }
                        }
                    }
                }
            });
        }
    </script>
</body>
</html>
